////////////////////////////////////////////////////////////////////////////////
//   oZone MPEG library
////////////////////////////////////////////////////////////////////////////////
#include<string.h>
#include"kernel.h"
#include"sound.h"
#include"mpeg2.h"
#include"stdlib.h"

////////////////////////////////////////////////////////////////////////////////
l_ulong AppVersion = ULONG_ID(0,0,0,1);
char    AppName[] = "MPEG decoder";
l_uid   nUID = "mpg";
l_uid NeededLibs[] = { "sound", "" };

static mpeg2dec_t * mpeg2dec;

////////////////////////////////////////////////////////////////////////////////
l_bool LibMain ( int argc, l_text *argv )
{
        mpeg2dec = mpeg2_init ();
        SYSEXPORT(mpeg2_init);
        SYSEXPORT(mpeg2_info);
        SYSEXPORT(mpeg2_parse);
        SYSEXPORT(mpeg2_buffer);
        SYSEXPORT(mpeg2_close);
//        SYSEXPORT();
        return (mpeg2dec==NULL?false:true);
}
////////////////////////////////////////////////////////////////////////////////
void Close (void)
{
        if (mpeg2dec) mpeg2_close (mpeg2dec);
}
////////////////////////////////////////////////////////////////////////////////
